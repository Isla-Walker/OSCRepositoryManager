<?xml version="1.0" encoding="UTF-8"?>

<Configuration status="WARN">
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout disableAnsi="false" pattern="[%d{dd-MM-YYYY HH:mm:ss}] [%style{%t}{bright,cyan}] [%style{%c{1}}{green}] [%level] %msg%n" />
        </Console>

        <!-- Index logging -->
        <RollingRandomAccessFile name="IndexFile" fileName="logs/latest.log" filePattern="logs/index-%d{dd-MM-YYYY-HH-mm-ss}-%i.log">
            <PatternLayout pattern="[%d{dd-MM-YYYY HH:mm:ss}] [%level] %msg%n" />

            <DefaultRolloverStrategy>
                <Delete basePath="logs/" maxDepth="2">
                    <IfFileName glob="*.log" />
                    <IfLastModified age="10d" />
                </Delete>
            </DefaultRolloverStrategy>

            <Policies>
                <IndexTriggeringPolicy />
            </Policies>
        </RollingRandomAccessFile>
    </Appenders>

    <Loggers>
        <Root>
            <AppenderRef ref="Console"/>
        </Root>

        <Logger name="org.oscwii.repositorymanager.RepositoryIndex">
            <AppenderRef ref="IndexFile" />
        </Logger>
    </Loggers>
</Configuration>