<?xml version="1.0" encoding="UTF-8"?>

<Configuration status="WARN">
    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <PatternLayout disableAnsi="false" pattern="[%d{dd-MM-YYYY HH:mm:ss}] [%style{%t}{bright,cyan}] [%style{%c{1}}{green}] [%level] - %msg%n" />
        </Console>

        <!-- Sentry -->
        <Sentry name="Sentry" />

        <!-- Index logging -->
        <RollingRandomAccessFile name="IndexFile" fileName="logs/latest.log" filePattern="logs/index-%d{dd-MM-YYYY-HH-mm-ss}-%i.log">
            <PatternLayout pattern="[%d{dd-MM-YYYY HH:mm:ss}] [%level] - %msg%n" />

            <DefaultRolloverStrategy>
                <Delete basePath="logs/" maxDepth="2">
                    <IfFileName glob="*.log" />
                    <IfLastModified age="10d" />
                </Delete>
            </DefaultRolloverStrategy>

            <Policies>
                <IndexTriggeringPolicy />
            </Policies>
        </RollingRandomAccessFile>
    </Appenders>

    <Loggers>
        <Root level="trace">
            <AppenderRef ref="Console" level="info" />
            <AppenderRef ref="Sentry" level="error" />
        </Root>

        <Logger name="org.oscwii.repositorymanager.RepositoryIndex" level="info">
            <AppenderRef ref="IndexFile" />
        </Logger>

        <Logger name="org.oscwii.repositorymanager.sources.SourceDownloader" level="info">
            <AppenderRef ref="IndexFile" />
        </Logger>

        <Logger name="org.oscwii.repositorymanager.treatments.TreatmentRunnable" level="info">
            <AppenderRef ref="IndexFile" />
        </Logger>
    </Loggers>
</Configuration>